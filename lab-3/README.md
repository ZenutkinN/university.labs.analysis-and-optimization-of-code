# Лабораторная работа 3 - Разработка блока генерации промежуточного кода транслятора простого языка программирования

## Общие сведения

Тестовые примеры представленны `./examples`.

Результаты работы тестовых примеров находятся в `./examples-result`

Документация к проекту находится [здесь](https://zenutkinn.github.io/lab-code-optimization/lab-3/doxygen/html/index.html)

### Инструкция по сборке

Для сборки проекта необходимо выполнить следующую команду

```
make
```

Для запуска необходимо передать файл с вашим кодом на языке NoJS исполняемому файлу a.out

```
./a.out < [pathToFile]
```

## Описание работы

### Цель

Цель: изучение методов генерации промежуточного кода с их программной реализацией.

### Задачи

* Изучение теоретического материала по организации генерации промежуточного кода компиляторов простых языков программирования. 
* Составление формального описания синтаксически-управляемого транслятора с действиями по генерации промежуточного кода. 
* Программная реализация компилятора в промежуточный код по формальному описанию. 
 

### Журнал проекта

| Дата | Исполнитель | Задание |
|:---: |:---:| :---:|
| 10.02.2020 – 16.05.2020 | Зенюткин Н.В. | Разработка “Белой книги” |
| 25.05.2020 – 31.05.2020 | Зенюткин Н.В. | Разработка лексического анализатора |
| 01.06.2020 – 07.06.2020 | Зенюткин Н.В. | Реализация синтаксического анализатора |
| 08.06.2020 – 10.06.2020 | Зенюткин Н.В. | Разработка блока генерации промежуточного кода транслятора |

### Описание языка, используемого в качестве промежуточного кода

Результатом работы программы является промежуточный код на языке LLVM IR (Документация LLVM представлена в разделе 
«Документация» на официальном сайте: [https://llvm.org/docs/](https://llvm.org/docs/)). 

### Классификация отслеживаемых транслятором ошибок
Все отслеживаемые программой ошибки делятся на 3 группы:
* Лексические: выход чисел за границы (“Error at line %d: %s – out of int
bounds %d.\n”), употребление символа, не определенного алфавитом (“LEXICAL
ERROR”), незакрытая кавычка при инициализации строки (“IS NOT A
STRING”);
* Синтаксические: неправильное использование конструкций (“syntax
error”);
* Семантические: несоответствие типов в выражениях, неправильное
употребление типов (“Wrong type of argument!”), несоответствие размеров
массивов при их инициализации (“Incorrect access to array element!”),
переменная/функция не объявлена (“Label isn’t created”, “Identifier does not
exist!”).

### Лексическая структура языка

#### Ключевые слова

Ключевыми и зарезервированными словами в языке NoJS являются:
* if
* else
* do
* while
* return
* string
* int
* float
* bool
* function

#### Символы пунктуации 

К символам пунктуации в языке NoJS относятся:

* !
* &
* |
* (
* )
* {
* }
* +
* -
* \*
* <
* \> 
* =
* /
* ;
* ,
* .

Символы	(	)	{	} 	должны использоваться попарно.

#### Идентификаторы

В языке NoJS идентификаторы используются для обозначения следующих элементов:
* имени переменной;
* имени функции.

Идентификатор может содержать строчные и прописные символы латинского алфавита, десятичные цифры или символ `_`. Идентификатор не должен начинаться с десятичной цифры.
Идентификаторы не могут совпадать с зарезервированными словами.

#### Разделители

В языке NoJS символами разделителями являются:
* пробельный символ
* символ табуляции
* точка с запятой
* запятая.

#### Литералы 

Язык NoJS поддерживает следующие виды литералов:
* целочисленный литерал;
* литерал с плавающей точкой;
* строковый литерал;
* логический литерал.

#### Целочисленный литерал

Целочисленные литералы используются для отображения в программе целых чисел.
Целых чисел изображаются последовательностью десятичных цифр.
Целочисленные литералы всегда имеют положительные значения. Для использования отрицательных целых чисел используется символ «-» помещённый перед выражением.
Целочисленные литералы рассматриваются как величины со знаками и имеют тип int.

#### Литерал с плавающей точкой

Литерал с плавающей точкой используются для отображения в программе вещественных чисел.
Вещественные числа определяются целой и дробной частью состоящих из десятичных цифр, разделенных символом «.». Для использования отрицательных вещественных чисел используется символ «-» помещённый перед выражением.
Все литералы с плавающей точкой имеют тип float.

#### Строковый литерал

Строковый литерал представляет последовательность символов, которые вместе образуют строку с завершающим нулевым символом. Символы должны быть заключены в двойные кавычки.
Строковые литералы имеют тип string.

#### Логический литерал

Логический литерал может иметь два значения – true и false. Логические значения true и false не преобразуются ни в какое числовое представление.
Логический литерал имеет тип bool.

#### Комментарии

Комментарием в языке NoJS является символ «//», за которыми следует любая последовательность символов. Символ перевода строки завершает комментарий.
Примеры кода представлены в Приложении А.

### Выражения и операторы

Операторы, используемые в языке NoJS представлены в следующей таблице 

|Приоритет|Тип оператора|Ассоциативность|Оператор|
|:---:|:---:|:---:|:---:|
|10|Группировка|не определенно|(…)|
|9|Вызов функции|слева направо|… ( … )|
|8|Логическое отрицание|справа налево|!(…)|
|7|Умножение|слева направо|… * …|
|7|Деление|слева направо|… / …|
|7|Остаток|слева направо|… % …|
|6|Сложение|слева направо|… + …|
|6|Вычитание|слева направо|… - …|
|5|Меньше|слева направо|… < …|
|5|Меньше или равно|слева направо|… <= …|
|5|Больше|слева направо|… > …|
|5|Больше или равно|слева направо|… >= …|
|4|Равно|слева направо|… == …|
|4|Не равно|слева направо|… != …|
|3|Логическое «И»|слева направо|… && …|
|2|Логическое «ИЛИ»|слева направо|… \|\| …|
|1|Присваивание|справа налево|… = …|

### Управляющие структуры

В языке NoJS условия соответствуют следующей конструкции:

```js
if (expr) {
	// условие выполнилось
} else {
	// условие не выполнилось
}                                                                                                       
```

Так же существуют две разновидности циклов с предусловием и постусловием.

```js
while (expr) {
	// пока условие выполняется – выполнять блок
}
```       

```js
do {
	// выполнять блок пока условие выполняется
} while (expr)
```

Изменения хода работы программы осуществляется с помощью команды `return`.